---
title: RPLidar
description: "RPLidar A1M8 Setup and Use"
---

## RPLidar

These instructions are for an [RPLidar A1M8](https://bucket-download.slamtec.com/d1e428e7efbdcd65a8ea111061794fb8d4ccd3a0/LD108_SLAMTEC_rplidar_datasheet_A1M8_v3.0_en.pdf).

First, determine the serial port the sensor is using:

```bash
ls /dev/tty.*  
ls /dev/cu.*  
```

Then run the `rptest.py` to determine the `sensor_mounting_angle` and the `angles_blanked`. These values depend on how you mounted the sensor and the radial position of any fixed obstructions, such as mounting brackets.

```bash
uv run rptest.py /dev/cu.usbserial-0001 # for example 
```

## Using the RPLidar A1M8 in OM1

Please configure the `.json5` as needed: 

```python
"""
Robot and sensor configuration
"""
{
  "type": "RPLidar",
  "config": {
    "serial_port": "/dev/cu.usbserial-0001",
    "half_width_robot": 0.21, # the width of the robot is 40 cm
    "max_relevant_distance": 1.1, # meters
    "sensor_mounting_angle": 180.0, # corrects for how sensor is mounted relative to robot
    "angles_blanked": [[-180.0, -160.0], [32.0, 46.6]]
  }
}
```

## Architecture 

The system pre-computes 9 different paths, 4 to the left, one straight ahead, 4 to the right, and one to the back. For each of the Bezier curves, the code checks whether the path approaches any detected object to within `half_width_robot`. If not, the path is considered to be a valid choice and the motion system can execute that path. 

## Assumptions

The code assumes that any unpredictable barriers (e.g. humans crossing the path of the robot) will be avoided using separate code within the `action` driver, such as by issuing a "STOP" command when an object is detected in front of the robot.   

## Unitree Test System 

Run
```bash
uv run src/run.py unitree_go2_lidar
```